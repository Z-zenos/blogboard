<form [formGroup]="form" class="form form--ctgr">
  <h2 class="form__header">
    Category Form
  </h2>
  <div class="form__input">
    <div>
      <!-- LOGO Image -->
      <label class="form__label">Logo</label>
      <div class="form__drag-area" #dragArea (dragover)="onDragOver($event)" (dragleave)="onDragLeave()"
        (drop)="onDrop($event)">
        <input type="file" hidden #inputFileImg (change)="onChange($event)" required>
        <div *ngIf="!file" class="drag">
          <div class="icon"><i class="fas fa-cloud-upload-alt"></i></div>
          <header #dragText>Drag & Drop</header>
          <span>OR</span>
          <button #btnFileImg (click)="browseFileImg()">Browse File</button>
        </div>
        <img *ngIf="file" class="ctgr-logo" [src]="category.logo" alt="image" class="ctgr-logo">
      </div>
      <p class="hint-text mt-10"><i class="fas fa-circle-info"></i> Allowed: jpeg, jpg, png.</p>

    </div>
    <div class="ctgr-name">
      <!-- COLOR -->
      <label class="form__label form__label--color">Color</label>
      <input type="color" placeholder="Color..." formControlName="color" (input)="pickColor($any($event))" />

      <!-- CTGR NAME -->
      <label class="form__label mt-2">New category name</label>
      <input type="text" placeholder="Python, Dash, Redux..." formControlName="name" required />

      <div
        class="flex p-4 border items-center rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400 dark:border-red-800"
        role="alert" *ngIf="ctgrFormControl['name'].touched && ctgrFormControl['name'].invalid"
        style="margin: 1rem 0; font-size: 13px; color: red; border-color: red;">
        <i class="fas fa-skull" style="margin-right: 5px;"></i>
        <span class="sr-only">Error</span>
        <div>
          Name is required!.
        </div>
      </div>

      <!-- File Info -->
      <label *ngIf="file" class="form__label mt-10 mb-0" style="margin-bottom: 0;">Info:</label>
      <div *ngIf="file" class="grid grid-cols-2 gap-3 place-items-center place-items-start">
        <div>
          <p class="indent flex items-center"><span class="info-text">file</span>: <span class="limited-text"
              style="margin-left: .5rem;">{{
              file!.name }}</span>,</p>
          <p class="indent">
            <span class="info-text">size</span>:
            {{ byteConverter(file!.size, 2) }}
          </p>
        </div>
        <button class="btn btn--blue" (click)="browseFileImg()">Change</button>
      </div>
      <p class="hint-text mt-10" *ngIf="file"><i class="fas fa-circle-info"></i> Drag and drop a new image or click the
        change button to replace the current image.</p>
    </div>
  </div>

  <!-- Preview -->
  <div class="form__preview">
    <label class="form__label">Preview &lt; Badge | Tag &gt;</label>
    <div class="preview">
      <blog-badge [src]="category.logo" [title]="form.value.name" [color]="category.color"></blog-badge>
      <blog-tag [tagName]="form.value.name" [color]="category.color"></blog-tag>
    </div>
  </div>
  <div class="form__btns">
    <button class="btn btn--green" (click)="onSubmit()" [disabled]="form.invalid">Create</button>
    <button class="btn btn--yellow" (click)="onClose()">Cancel</button>
  </div>
</form>